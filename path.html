<!doctype html>
<dl>
  <dt>References</dt>
  <dd><ul id="references"></ul></dd>
</dl>
<script src="misc.js"></script>
<script>
  (async () => {
    try {
      const options = new URL(window.location).searchParams;
      const cacheBase = options.get('cache_base');
      const hash = options.get('hash');
      const narinfo = await cacheGetNarinfo(cacheBase, hash);

      const vReferences = document.getElementById('references');
      for (const reference of narinfo.references) {
        const refHash = /([0-9a-z]+)-[^/]+$/.exec(reference)[1];
        const vLi = document.createElement('li');
        const vA = document.createElement('a');
        vA.href = `?cache_base=${encodeURIComponent(cacheBase)}&hash=${encodeURIComponent(refHash)}`;
        vA.textContent = reference;
        vLi.appendChild(vA);
        vReferences.appendChild(vLi);
      }
    } catch (e) {
      console.error(e);
    }
  })();
</script>
